CREATE TABLE accounts (
	user_id serial PRIMARY KEY,
	username VARCHAR ( 50 ) UNIQUE NOT NULL,
	password VARCHAR ( 50 ) NOT NULL,
	email VARCHAR ( 255 ) UNIQUE NOT NULL,
	f_name VARCHAR (50) NOT NULL,
	l_name VARCHAR (50) NOT NULL,
	active boolean NOT NULL,
	notes VARCHAR (200), 
	created_on TIMESTAMP NOT NULL,
    last_login TIMESTAMP 
);


CREATE TABLE account_roles (
  user_id INT NOT NULL,
  role_id INT NOT NULL,
  grant_date TIMESTAMP,
  PRIMARY KEY (user_id, role_id),
  FOREIGN KEY (role_id)
      REFERENCES roles (role_id),
  FOREIGN KEY (user_id)
      REFERENCES accounts (user_id)
);

CREATE TABLE roles(
   role_id serial PRIMARY KEY,
   role_name VARCHAR (255) UNIQUE NOT NULL
);

CREATE TABLE tasks(
   task_id serial PRIMARY KEY,
   task_name VARCHAR (150) NOT NULL,
   task_description VARCHAR (255),
   task_created TIMESTAMP NOT NULL,
   task_due TIMESTAMP,
   task_completed boolean,
   user_id INT NOT NULL,
   status_id INT NOT NULL,
   FOREIGN KEY (status_id)
      REFERENCES status (status_id),
   FOREIGN KEY (user_id)
      REFERENCES accounts (user_id)
);

CREATE TABLE status(
   status_id serial PRIMARY KEY,
   status_name VARCHAR (50) NOT NULL,
   status_description VARCHAR (150)
);
